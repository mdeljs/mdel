!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):(t=t||self,e(t.mdel={}))}(this,function(t){"use strict";function e(t,e){function n(){this.constructor=t}if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");p(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function n(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function r(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t}function o(t){return"[object Object]"===Object.prototype.toString.call(t)}function i(t,e){throw void 0===e&&(e="mdel"),new Error(e+":"+t)}function c(t,e){var n={};return Object.keys(t).forEach(function(r){n[r]=t[r].bind(e)}),n}function s(t){function e(t){return t&&t.core&&t.core.isStore?s(t):o(t)?Object.keys(t).reduce(function(n,r){return n[r]=e(t[r]),n},{}):Array.isArray(t)?t.map(function(t){return e(t)}):t}return e(u(t))}function a(t){o(t)||i("data is not a object"),t.core&&i("data cannot have core property"),t.actions&&i("data cannot have core property")}function u(t){t.core,t.actions;return n(t,["core","actions"])}function f(t){var e;return function(){for(var n,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return e||(e=new((n=t).bind.apply(n,r([void 0],o))))}}function b(t){var n;o(t)||i("initiator is not a object"),"function"!=typeof t.data&&i("initiator.data is not a function"),t.actions&&!o(t.actions)&&i("initiator.actions is not a object"),t.base&&!t.base.isModel&&i("initiator.conn is not a Model");var r=t.base||y;if(t.single){return f(b(Object.assign({},t,{single:!1})))}return n=function(n){function o(){var e=this,o=arguments[0],i=t.data(),s=t.actions||{};return e=n.call(this,o||{sourceExtend:!0})||this,e.core.baseActions=l({},e.actions),e.core.resetData=function(){var n={};t.base&&(n=u(new r({sourceExtend:!0}))),e.core.setData(l(l({},n),t.data()))},a(i),Object.assign(e,i),Object.assign(e.actions,c(s,e)),o&&o.sourceExtend||(Object.seal(e),Object.freeze(e.actions),Object.freeze(e.core)),e}return e(o,n),o}(r),n.isModel=!0,n}var p=function(t,e){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},l=function(){return l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},l.apply(this,arguments)},v=function(){function t(){this.observes=[]}return t.prototype.addObserver=function(t){this.removeObserver(t),this.observes.push(t)},t.prototype.removeObserver=function(t){this.observes=this.observes.filter(function(e){return e!==t})},t.prototype.notifyObservers=function(t,e){r([],this.observes).forEach(function(n){return n.call(t,e)})},t}(),y=function(){function t(){var t=this;this.core={isStore:!0,setData:function(e){a(e);var n=u(t);Object.assign(t,e),t.core.__observable.notifyObservers(t,n)},convertData:function(){return s(t)},observe:function(e){return t.core.__observable.addObserver(e),function(){return t.core.__observable.removeObserver(e)}},resetData:function(){},baseActions:{},__observable:new v},this.actions={}}return t}(),d=b;t.createModel=d,t.isObject=o,t.throwError=i,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=mdel.min.js.map