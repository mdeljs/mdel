function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function e(t,r){return(e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,r)}function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function n(t,o,c){return(n=r()?Reflect.construct:function(t,r,n){var o=[null];o.push.apply(o,r);var c=new(Function.bind.apply(t,o));return n&&e(c,n.prototype),c}).apply(null,arguments)}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return"[object Object]"===Object.prototype.toString.call(t)}function i(t,e){throw void 0===e&&(e="mdel"),new Error(e+":"+t)}function a(t,e){var r={};return Object.keys(t).forEach(function(n){r[n]=t[n].bind(e)}),r}var s=function(){function t(){this.observes=[]}var e=t.prototype;return e.addObserver=function(t){this.removeObserver(t),this.observes.push(t)},e.removeObserver=function(t){this.observes=this.observes.filter(function(e){return e!==t})},e.notifyObservers=function(t,e){[].concat(this.observes).forEach(function(r){return r.call(t,e)})},t}();function u(t){return function t(e){return e&&e.core&&e.core.isStore?u(e):c(e)?Object.keys(e).reduce(function(r,n){return r[n]=t(e[n]),r},{}):Array.isArray(e)?e.map(function(e){return t(e)}):e}(b(t))}function f(t){c(t)||i("data is not a object"),t.core&&i("data cannot have core property"),t.actions&&i("data cannot have core property")}function b(t){return function(t,e){if(null==t)return{};var r,n,o={},c=Object.keys(t);for(n=0;n<c.length;n++)e.indexOf(r=c[n])>=0||(o[r]=t[r]);return o}(t,["core","actions"])}var l=function(){var t=this;this.core={isStore:!0,setData:function(e){f(e);var r=b(t);Object.assign(t,e),t.core.__observable.notifyObservers(t,r)},convertData:function(){return u(t)},observe:function(e){return t.core.__observable.addObserver(e),function(){return t.core.__observable.removeObserver(e)}},resetData:function(){},baseActions:{},__observable:new s}};exports.createModel=function r(s){var u;c(s)||i("initiator is not a object"),"function"!=typeof s.data&&i("initiator.data is not a function"),s.actions&&!c(s.actions)&&i("initiator.actions is not a object"),s.base&&!s.base.isModel&&i("initiator.conn is not a Model");var v,p,d=s.base||l;if(s.single){var h=Object.assign({},s,{single:!1});return v=r(h),function(){return p||(p=n(v,[].slice.call(arguments)))}}return(u=function(r){var n,c;function i(){var e;e=r.call(this,arguments[0]||{sourceExtend:!0})||this;var n=arguments[0],c=s.data(),i=s.actions||{};return e.core.baseActions=t({},e.actions),e.core.resetData=function(){var r={};s.base&&(r=b(new d({sourceExtend:!0}))),e.core.setData(t({},r,s.data()))},f(c),Object.assign(o(e),c),Object.assign(e.actions,a(i,o(e))),n&&n.sourceExtend||(Object.seal(o(e)),Object.freeze(e.actions),Object.freeze(e.core)),e}return c=r,(n=i).prototype=Object.create(c.prototype),n.prototype.constructor=n,e(n,c),i}(d)).isModel=!0,u},exports.isObject=c,exports.throwError=i,exports.version="8.0.0";
//# sourceMappingURL=mdel.js.map
