function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function e(t,n){return(e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,n)}function n(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function r(t,o,c){return(r=n()?Reflect.construct:function(t,n,r){var o=[null];o.push.apply(o,n);var c=new(Function.bind.apply(t,o));return r&&e(c,r.prototype),c}).apply(null,arguments)}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return"[object Object]"===Object.prototype.toString.call(t)}function i(t,e){throw void 0===e&&(e="mdel"),new Error(e+":"+t)}function a(t,e){var n={};return Object.keys(t).forEach(function(r){n[r]=t[r].bind(e)}),n}var s=function(){function t(){this.observes=[]}var e=t.prototype;return e.addObserver=function(t){this.removeObserver(t),this.observes.push(t)},e.removeObserver=function(t){this.observes=this.observes.filter(function(e){return e!==t})},e.notifyObservers=function(t,e){[].concat(this.observes).forEach(function(n){return n.call(t,e)})},t}();function u(t){return function t(e){return e&&e.core&&e.core.isStore?u(e):c(e)?Object.keys(e).reduce(function(n,r){return n[r]=t(e[r]),n},{}):Array.isArray(e)?e.map(function(e){return t(e)}):e}(b(t))}function f(t){c(t)||i("data is not a object"),t.core&&i("data cannot have core property"),t.actions&&i("data cannot have core property")}function b(t){return function(t,e){if(null==t)return{};var n,r,o={},c=Object.keys(t);for(r=0;r<c.length;r++)e.indexOf(n=c[r])>=0||(o[n]=t[n]);return o}(t,["core","actions"])}var l=function(){var t=this;this.core={isStore:!0,setData:function(e){f(e);var n=b(t);Object.assign(t,e),t.core.__observable.notifyObservers(t,n)},convertData:function(){return u(t)},observe:function(e){return t.core.__observable.addObserver(e),function(){return t.core.__observable.removeObserver(e)}},resetData:function(){},baseActions:{},__observable:new s}},v=function n(s){var u;c(s)||i("initiator is not a object"),"function"!=typeof s.data&&i("initiator.data is not a function"),s.actions&&!c(s.actions)&&i("initiator.actions is not a object"),s.base&&!s.base.isModel&&i("initiator.conn is not a Model");var v,p,d=s.base||l;if(s.single){var y=Object.assign({},s,{single:!1});return v=n(y),function(){return p||(p=r(v,[].slice.call(arguments)))}}return(u=function(n){var r,c;function i(){var e;e=n.call(this,arguments[0]||{sourceExtend:!0})||this;var r=arguments[0],c=s.data(),i=s.actions||{};return e.core.baseActions=t({},e.actions),e.core.resetData=function(){var n={};s.base&&(n=b(new d({sourceExtend:!0}))),e.core.setData(t({},n,s.data()))},f(c),Object.assign(o(e),c),Object.assign(e.actions,a(i,o(e))),r&&r.sourceExtend||(Object.seal(o(e)),Object.freeze(e.actions),Object.freeze(e.core)),e}return c=n,(r=i).prototype=Object.create(c.prototype),r.prototype.constructor=r,e(r,c),i}(d)).isModel=!0,u};export{v as createModel,c as isObject,i as throwError};
//# sourceMappingURL=mdel.module.js.map
