!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e||self).mdel={})}(this,function(e){function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function o(e,t,c){return(o=r()?Reflect.construct:function(e,t,r){var o=[null];o.push.apply(o,t);var c=new(Function.bind.apply(e,o));return r&&n(c,r.prototype),c}).apply(null,arguments)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return"[object Object]"===Object.prototype.toString.call(e)}function a(e,t){throw void 0===t&&(t="mdel"),new Error(t+":"+e)}function s(e,t){var n={};return Object.keys(e).forEach(function(r){n[r]=e[r].bind(t)}),n}var u=function(){function e(){this.observes=[]}var t=e.prototype;return t.addObserver=function(e){this.removeObserver(e),this.observes.push(e)},t.removeObserver=function(e){this.observes=this.observes.filter(function(t){return t!==e})},t.notifyObservers=function(e,t){[].concat(this.observes).forEach(function(n){return n.call(e,t)})},e}();function f(e){return function e(t){return t&&t.core&&t.core.isStore?f(t):i(t)?Object.keys(t).reduce(function(n,r){return n[r]=e(t[r]),n},{}):Array.isArray(t)?t.map(function(t){return e(t)}):t}(b(e))}function l(e){i(e)||a("data is not a object"),e.core&&a("data cannot have core property"),e.actions&&a("data cannot have core property")}function b(e){return function(e,t){if(null==e)return{};var n,r,o={},c=Object.keys(e);for(r=0;r<c.length;r++)t.indexOf(n=c[r])>=0||(o[n]=e[n]);return o}(e,["core","actions"])}var p=function(){var e=this;this.core={isStore:!0,setData:function(t){l(t);var n=b(e);Object.assign(e,t),e.core.__observable.notifyObservers(e,n)},convertData:function(){return f(e)},observe:function(t){return e.core.__observable.addObserver(t),function(){return e.core.__observable.removeObserver(t)}},resetData:function(){},baseActions:{},__observable:new u}};e.createModel=function e(r){var u;i(r)||a("initiator is not a object"),"function"!=typeof r.data&&a("initiator.data is not a function"),r.actions&&!i(r.actions)&&a("initiator.actions is not a object"),r.base&&!r.base.isModel&&a("initiator.conn is not a Model");var f,v,d=r.base||p;if(r.single){var y=Object.assign({},r,{single:!1});return f=e(y),function(){return v||(v=o(f,[].slice.call(arguments)))}}return(u=function(e){var o,i;function a(){var n;n=e.call(this,arguments[0]||{sourceExtend:!0})||this;var o=arguments[0],i=r.data(),a=r.actions||{};return n.core.baseActions=t({},n.actions),n.core.resetData=function(){var e={};r.base&&(e=b(new d({sourceExtend:!0}))),n.core.setData(t({},e,r.data()))},l(i),Object.assign(c(n),i),Object.assign(n.actions,s(a,c(n))),o&&o.sourceExtend||(Object.seal(c(n)),Object.freeze(n.actions),Object.freeze(n.core)),n}return i=e,(o=a).prototype=Object.create(i.prototype),o.prototype.constructor=o,n(o,i),a}(d)).isModel=!0,u},e.isObject=i,e.throwError=a});
//# sourceMappingURL=mdel.umd.js.map
